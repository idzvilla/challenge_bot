# Telegram-–±–æ—Ç –¥–ª—è —á–µ–ª–ª–µ–Ω–¥–∂–∞ –ø–æ –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è–º

Telegram-–±–æ—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ —á–µ–ª–ª–µ–Ω–¥–∂–µ –ø–æ –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è–º. –¶–µ–ª—å: 18 250 –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–π –∑–∞ –≥–æ–¥ (–º–∏–Ω–∏–º—É–º 50 –≤ –¥–µ–Ω—å).

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Node.js + TypeScript
- Telegraf (Telegram Bot API)
- SQLite (better-sqlite3)
- dotenv –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- `/start` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- `/add <—á–∏—Å–ª–æ>` - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è (1-500)
- `/me` - –ú–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å (–≤—Å–µ–≥–æ, —Å–µ–≥–æ–¥–Ω—è, —Å—Ä–µ–¥–Ω–µ–µ, –æ—Å—Ç–∞–ª–æ—Å—å –¥–æ —Ü–µ–ª–∏)
- `/top` - –õ–∏–¥–µ—Ä–±–æ—Ä–¥ —Ç–æ–ø-20 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- `/today` - –ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è –∑–∞ —Å–µ–≥–æ–¥–Ω—è
- `/undo` - –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –∑–∞–ø–∏—Å—å
- `/rules` - –ü—Ä–∞–≤–∏–ª–∞ —á–µ–ª–ª–µ–Ω–¥–∂–∞

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install
```

3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `env.example`:
```bash
BOT_TOKEN=your_telegram_bot_token_here
TIMEZONE=Europe/Minsk
CHALLENGE_START_DATE=2024-01-01
DATABASE_PATH=./data/challenge.db
```

4. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞:
   - –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot` –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –≤ `.env`

5. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
```bash
npm run build
```

6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
```bash
npm start
```

–ò–ª–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π:
```bash
npm run dev
```

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (—Å–º. –≤—ã—à–µ)

2. –°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```bash
docker-compose up -d --build
```

3. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
docker-compose logs -f
```

4. –û—Å—Ç–∞–Ω–æ–≤–∫–∞:
```bash
docker-compose down
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `users`
- `id` - PRIMARY KEY
- `tg_user_id` - UNIQUE, Telegram user ID
- `username` - Telegram username
- `first_name` - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `joined_at` - –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### –¢–∞–±–ª–∏—Ü–∞ `logs`
- `id` - PRIMARY KEY
- `user_id` - FOREIGN KEY –∫ users.id
- `reps` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–π
- `logged_at` - ISO timestamp –∑–∞–ø–∏—Å–∏
- `log_date` - –î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD (–ø–æ —Ç–∞–π–º–∑–æ–Ω–µ –∏–∑ .env)

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–∞–π–ª–µ `.env`:

- `BOT_TOKEN` - –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `TIMEZONE` - –¢–∞–π–º–∑–æ–Ω–∞ –¥–ª—è –¥–∞—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: Europe/Minsk)
- `CHALLENGE_START_DATE` - –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —á–µ–ª–ª–µ–Ω–¥–∂–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 2024-01-01)
- `DATABASE_PATH` - –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: ./data/challenge.db)

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ReplyKeyboard —Å –∫–Ω–æ–ø–∫–∞–º–∏:
- ‚ûï –î–æ–±–∞–≤–∏—Ç—å
- üë§ –ú–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å
- üèÜ –õ–∏–¥–µ—Ä–±–æ—Ä–¥
- üìÖ –°–µ–≥–æ–¥–Ω—è
- üìå –ü—Ä–∞–≤–∏–ª–∞
- ‚Ü©Ô∏è Undo

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –°–±–æ—Ä–∫–∞
npm run build

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –ó–∞–ø—É—Å–∫ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
npm start
```

## –î–µ–ø–ª–æ–π

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (Railway, Render, Fly.io –∏ –¥—Ä.) –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ [DEPLOY.md](./DEPLOY.md).

**–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –Ω–∞ Railway:**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [railway.app](https://railway.app)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–∑ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
3. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (BOT_TOKEN, TIMEZONE, –∏ —Ç.–¥.)
4. –ì–æ—Ç–æ–≤–æ! –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—Å—è –∏ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å 24/7

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

